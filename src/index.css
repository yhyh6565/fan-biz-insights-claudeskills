@import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable-dynamic-subset.min.css');

@tailwind base;
@tailwind components;
@tailwind utilities;

/**
 * Modern Web Magazine Design System - 덕질로 배운 비즈니스
 *
 * Design Philosophy:
 * - 가독성 최우선: Pretendard Variable로 한글 최적화
 * - 미니멀 레이아웃: 콘텐츠가 돋보이는 깔끔한 디자인
 * - 성능 최적화: 부드러운 60fps 애니메이션
 * - 접근성: WCAG 2.1 AA 준수
 *
 * Inspired by: Medium, Brunch, The Verge
 */

/* ============================================
   BASE LAYER - Design Tokens & Variables
   ============================================ */

@layer base {
  :root {
    /* ========== Color System - Optimized for Readability ========== */

    /* Base colors - Clean, high contrast */
    --background: 0 0% 100%;     /* Pure white for maximum readability */
    --foreground: 0 0% 9%;       /* Near-black text (92% contrast) */

    /* Component-specific colors */
    --card: 0 0% 100%;
    --card-foreground: 0 0% 9%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 9%;

    /* Primary colors - Deep charcoal */
    --primary: 0 0% 9%;
    --primary-foreground: 0 0% 100%;

    /* Secondary & utility colors - Subtle grays */
    --secondary: 0 0% 96%;
    --secondary-foreground: 0 0% 9%;
    --muted: 0 0% 96%;
    --muted-foreground: 0 0% 45%;
    --accent: 0 0% 95%;
    --accent-foreground: 0 0% 9%;

    /* State colors */
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;
    --border: 0 0% 89%;          /* Subtle borders */
    --input: 0 0% 89%;
    --ring: 0 0% 9%;

    /* Border radius - Minimal, modern */
    --radius: 0.5rem;

    /* ========== Category Theme Colors ========== */

    /* K-POP Theme - Vibrant pink to purple gradient
       Usage: bg-kpop-500, text-kpop-700, etc. */
    --kpop-50: 330 100% 98%;
    --kpop-100: 330 90% 96%;
    --kpop-200: 330 85% 92%;
    --kpop-300: 330 80% 82%;
    --kpop-500: 330 85% 55%;
    --kpop-600: 330 75% 45%;
    --kpop-700: 330 70% 35%;
    --kpop-900: 330 65% 20%;

    /* MCU Theme - Electric blue with cosmic accents
       Usage: bg-mcu-500, text-mcu-700, etc. */
    --mcu-50: 220 100% 98%;
    --mcu-100: 220 95% 95%;
    --mcu-200: 220 90% 90%;
    --mcu-300: 220 85% 80%;
    --mcu-500: 220 90% 56%;
    --mcu-600: 220 85% 48%;
    --mcu-700: 220 80% 38%;
    --mcu-900: 220 75% 22%;

    /* ========== Layout & Spacing - Medium/Brunch Style ========== */

    --section-spacing: 5rem;          /* Vertical spacing between sections */
    --content-max-width: 680px;       /* Optimal reading width (66-75 chars) */
    --container-max-width: 1280px;    /* Maximum container width */
    --article-line-height: 1.75;      /* Comfortable reading line height */

    /* Grid system */
    --grid-gap: 2rem;                 /* Standard grid gap */
    --grid-gap-sm: 1rem;              /* Small grid gap */

    /* ========== Typography Scale ========== */

    --font-size-xs: 0.75rem;          /* 12px - Caption, labels */
    --font-size-sm: 0.875rem;         /* 14px - Small text */
    --font-size-base: 1rem;           /* 16px - Body */
    --font-size-lg: 1.125rem;         /* 18px - Large body */
    --font-size-xl: 1.25rem;          /* 20px - Subheading */
    --font-size-2xl: 1.5rem;          /* 24px - Heading 3 */
    --font-size-3xl: 1.875rem;        /* 30px - Heading 2 */
    --font-size-4xl: 2.25rem;         /* 36px - Heading 1 */
    --font-size-5xl: 3rem;            /* 48px - Display */

    /* ========== Transitions & Animations - 60fps Optimized ========== */

    /* Smooth transition - transform and opacity only (GPU accelerated) */
    --transition-smooth: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                         opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);

    /* Fast transition - Immediate feedback */
    --transition-fast: transform 0.15s cubic-bezier(0.4, 0, 0.2, 1),
                       opacity 0.15s cubic-bezier(0.4, 0, 0.2, 1);

    /* ========== Shadow System ========== */

    /* Subtle depth for cards and elements */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.02);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.06), 0 4px 6px -2px rgba(0, 0, 0, 0.03);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.08), 0 10px 10px -5px rgba(0, 0, 0, 0.04);

    /* ========== Chart Colors ========== */

    --chart-1: 220 90% 56%;  /* Blue */
    --chart-2: 330 85% 55%;  /* Pink */
    --chart-3: 142 76% 45%;  /* Green */
    --chart-4: 271 81% 60%;  /* Purple */
    --chart-5: 43 96% 56%;   /* Yellow */
  }

  /* ========== Dark Mode ========== */
  .dark {
    /* Base colors - Deep charcoal background */
    --background: 24 10% 8%;
    --foreground: 40 10% 98%;

    /* Component colors */
    --card: 24 8% 12%;
    --card-foreground: 40 10% 98%;
    --popover: 24 8% 12%;
    --popover-foreground: 40 10% 98%;

    /* Primary colors - Inverted for dark mode */
    --primary: 40 10% 98%;
    --primary-foreground: 24 10% 8%;

    /* Secondary & utility colors */
    --secondary: 24 6% 16%;
    --secondary-foreground: 40 10% 98%;
    --muted: 24 6% 18%;
    --muted-foreground: 25 5% 60%;
    --accent: 24 6% 16%;
    --accent-foreground: 40 10% 98%;

    /* State colors */
    --destructive: 0 78% 55%;
    --destructive-foreground: 40 10% 98%;
    --border: 24 6% 20%;
    --input: 24 6% 20%;
    --ring: 40 10% 85%;

    /* Enhanced shadows for dark mode */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -1px rgba(0, 0, 0, 0.3);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5), 0 4px 6px -2px rgba(0, 0, 0, 0.4);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.6), 0 10px 10px -5px rgba(0, 0, 0, 0.5);

    /* Brighter chart colors for dark backgrounds */
    --chart-1: 220 90% 65%;
    --chart-2: 330 85% 65%;
    --chart-3: 142 76% 55%;
    --chart-4: 271 81% 70%;
    --chart-5: 43 96% 65%;
  }
}

/* ============================================
   TYPOGRAPHY & BASE STYLES
   ============================================ */

@layer base {
  * {
    @apply border-border;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
    font-weight: 400;
    font-size: 16px;
    line-height: 1.75;
    letter-spacing: -0.003em;
    /* Enable font smoothing for better readability */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  /* Enhanced focus states for accessibility */
  *:focus-visible {
    @apply outline-none ring-2 ring-primary ring-offset-2 ring-offset-background;
    outline-offset: 2px;
  }

  /* Typography - Medium/Brunch Style for Optimal Readability */
  .article-content {
    @apply leading-relaxed;
    font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
    font-size: 1.125rem;        /* 18px - optimal for reading */
    line-height: 1.75;          /* 28.8px - comfortable spacing */
    font-weight: 400;
    letter-spacing: -0.003em;
    color: hsl(var(--foreground));
    max-width: var(--content-max-width);
  }

  .article-content h1 {
    @apply font-bold mb-6 mt-12;
    font-size: clamp(2rem, 5vw, 2.5rem);   /* 32-40px */
    line-height: 1.2;
    letter-spacing: -0.02em;
    font-weight: 700;
  }

  .article-content h2 {
    @apply font-bold mb-5 mt-10;
    font-size: clamp(1.5rem, 4vw, 1.875rem);  /* 24-30px */
    line-height: 1.3;
    letter-spacing: -0.015em;
    font-weight: 700;
  }

  .article-content h3 {
    @apply font-semibold mb-4 mt-8;
    font-size: clamp(1.25rem, 3vw, 1.5rem);   /* 20-24px */
    line-height: 1.4;
    letter-spacing: -0.01em;
    font-weight: 600;
  }

  .article-content p {
    @apply mb-6;
    max-width: var(--content-max-width);
  }

  .article-content blockquote {
    @apply border-l-4 border-primary/30 pl-8 italic my-10 text-foreground/90;
    font-size: 1.25rem;
    line-height: 1.75;
    font-weight: 500;
    letter-spacing: -0.015em;
  }

  .article-content ul,
  .article-content ol {
    @apply mb-6 space-y-3 pl-8;
    max-width: var(--content-max-width);
  }

  .article-content ul {
    @apply list-disc;
  }

  .article-content ol {
    @apply list-decimal;
  }

  .article-content li {
    @apply mb-3;
    padding-left: 0.5rem;
  }

  .article-content a {
    @apply text-primary underline decoration-2 underline-offset-2 hover:text-primary/70 transition-colors;
    font-weight: 500;
  }

  .article-content table {
    @apply w-full border-collapse my-10;
    max-width: var(--content-max-width);
  }

  .article-content th,
  .article-content td {
    @apply border border-border px-5 py-4 text-left;
  }

  .article-content th {
    @apply bg-muted font-semibold;
    font-size: 0.9375rem;
  }

  .article-content figure {
    @apply my-10;
  }

  .article-content figcaption {
    @apply text-sm text-muted-foreground mt-4 text-center italic;
    font-weight: 500;
  }

  .article-content img {
    @apply w-full rounded-xl shadow-lg;
  }
}

/* ============================================
   UTILITIES LAYER - Animations & Helpers
   ============================================ */

@layer utilities {
  /* ========== Keyframe Animations - 60fps Optimized ========== */
  /* Only animate transform and opacity for best performance */

  /* Fade in with subtle upward movement */
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translate3d(0, 16px, 0);
    }
    to {
      opacity: 1;
      transform: translate3d(0, 0, 0);
    }
  }

  /* Slide up with fade - Smooth entrance */
  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translate3d(0, 32px, 0);
    }
    to {
      opacity: 1;
      transform: translate3d(0, 0, 0);
    }
  }

  /* Scale in with fade - Subtle attention */
  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale3d(0.96, 0.96, 1);
    }
    to {
      opacity: 1;
      transform: scale3d(1, 1, 1);
    }
  }

  /* Image zoom - Smooth hover effect */
  @keyframes imageZoom {
    from {
      transform: scale3d(1, 1, 1);
    }
    to {
      transform: scale3d(1.05, 1.05, 1);
    }
  }

  /* ========== Animation Classes ========== */

  /* Usage: className="animate-fade-in" */
  .animate-fade-in {
    animation: fadeIn 0.5s cubic-bezier(0.4, 0, 0.2, 1) both;
    will-change: transform, opacity;
  }

  .animate-slide-up {
    animation: slideUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) both;
    will-change: transform, opacity;
  }

  .animate-scale-in {
    animation: scaleIn 0.4s cubic-bezier(0.4, 0, 0.2, 1) both;
    will-change: transform, opacity;
  }

  /* ========== Staggered Animation Delays ========== */
  /* Usage: className="animate-fade-in animate-delay-200" */

  .animate-delay-100 {
    animation-delay: 100ms;
  }

  .animate-delay-200 {
    animation-delay: 200ms;
  }

  .animate-delay-300 {
    animation-delay: 300ms;
  }

  .animate-delay-400 {
    animation-delay: 400ms;
  }

  /* ========== Glass Morphism Effect ========== */
  /* Usage: className="glass" for frosted glass appearance */

  .glass {
    background: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }

  .dark .glass {
    background: rgba(0, 0, 0, 0.4);
  }

  /* ========== Gradient Text Effects ========== */
  /* Usage: className="gradient-text-kpop" or "gradient-text-mcu" */

  .gradient-text-kpop {
    background: linear-gradient(135deg, hsl(var(--kpop-600)), hsl(var(--kpop-500)));
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .gradient-text-mcu {
    background: linear-gradient(135deg, hsl(var(--mcu-600)), hsl(var(--mcu-500)));
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  /* ========== Transition Utilities ========== */
  /* Usage: className="transition-smooth" or "transition-spring" */

  .transition-smooth {
    transition: var(--transition-smooth);
  }

  .transition-spring {
    transition: var(--transition-spring);
  }

  /* ========== Shadow Utilities ========== */
  /* Usage: className="shadow-elegant" for sophisticated depth */

  .shadow-elegant {
    box-shadow: var(--shadow-lg);
  }

  .shadow-dramatic {
    box-shadow: var(--shadow-xl);
  }

  /* ========== Web Magazine Utilities - Medium/Brunch Style ========== */

  /* Pull quote styling - Clean and minimal */
  .pull-quote {
    font-size: 1.5rem;
    line-height: 1.6;
    font-weight: 500;
    color: hsl(var(--foreground));
    border-left: 3px solid hsl(var(--foreground));
    padding-left: 1.5rem;
    margin: 2.5rem 0;
    font-style: normal;
  }

  /* Content container - Optimal reading width */
  .content-container {
    max-width: var(--content-max-width);
    margin-left: auto;
    margin-right: auto;
  }

  /* Card hover effect - Smooth lift */
  .card-hover {
    transition: var(--transition-smooth);
    will-change: transform, opacity;
  }

  .card-hover:hover {
    transform: translate3d(0, -4px, 0);
  }

  /* Image container - Prevents layout shift */
  .img-container {
    position: relative;
    overflow: hidden;
  }

  .img-container img {
    transition: var(--transition-smooth);
    will-change: transform;
  }

  .img-container:hover img {
    transform: scale3d(1.05, 1.05, 1);
  }

  /* Subtle underline on hover */
  .hover-underline {
    position: relative;
    display: inline-block;
  }

  .hover-underline::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 1px;
    background: currentColor;
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    will-change: transform;
  }

  .hover-underline:hover::after {
    transform: scaleX(1);
  }

  /* Fade in on scroll - Progressive enhancement */
  @media (prefers-reduced-motion: no-preference) {
    .fade-in-scroll {
      opacity: 0;
      transform: translate3d(0, 20px, 0);
      transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1),
                  transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      will-change: opacity, transform;
    }

    .fade-in-scroll.is-visible {
      opacity: 1;
      transform: translate3d(0, 0, 0);
    }
  }

  /* Respect reduced motion preference */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}
